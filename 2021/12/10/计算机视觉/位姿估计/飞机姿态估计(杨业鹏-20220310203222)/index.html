<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>飞机6D位姿估计 | young&#39;s blog</title>
  <meta name="keywords" content=" 位姿估计 ">
  <meta name="description" content="飞机6D位姿估计 | young&#39;s blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Oops～，我崩溃了！找不到你想要的页面了">
<meta property="og:type" content="website">
<meta property="og:title" content="404">
<meta property="og:url" content="https://youngyyp.github.io/404.html">
<meta property="og:site_name" content="young&#39;s blog">
<meta property="og:description" content="Oops～，我崩溃了！找不到你想要的页面了">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-02-23T11:37:07.000Z">
<meta property="article:modified_time" content="2021-02-10T02:51:50.601Z">
<meta property="article:author" content="young">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="young's blog" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/1.png"/>
</a>
<div class="author">
    <span>young</span>
</div>

<div class="icon">
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(40)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="计算机视觉">
                        
                        计算机视觉
                        <small>(19)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="嵌入式和硬件">
                        
                        嵌入式和硬件
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="软件使用">
                        
                        软件使用
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="位姿估计">
                        
                        位姿估计
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="CPP">
                        
                        CPP
                        <small>(9)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="FPGA">
                        
                        FPGA
                        <small>(6)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
    </div>
    <div>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="40">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>目标检测</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>目标识别</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>深度学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>神经网络</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>事件相机</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数电</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>特征匹配</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图像处理</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图像匹配</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>位姿估计</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>线路故障检测</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>障碍物识别</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>正交解调，FPGA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>自平衡电桥</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Atlas</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>batch norm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dehazing</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>haze removal</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hexo指令</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>heze removal</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HLS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>modelsim</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pytorch</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SLAM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>test time adaptation</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ubuntu</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>verilog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vivado</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>yolo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ZYNQ</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="动态规划">动态规划</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E5%AD%97%E7%AC%A6%E4%B8%B2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="字符串">字符串</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E6%95%B0%E7%BB%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="数组">数组</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="贪心算法">贪心算法</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E9%93%BE%E8%A1%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="链表">链表</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E5%93%88%E5%B8%8C%E8%A1%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="哈希表">哈希表</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E5%9B%9E%E6%BA%AF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="回溯">回溯</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="栈与队列">栈与队列</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 CPP "
           href="/2023/02/01/cpp/%E4%BA%8C%E5%8F%89%E6%A0%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="二叉树">二叉树</span>
            <span class="post-date" title="2023-02-01 21:14:33">2023/02/01</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/08/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E6%8A%80%E5%B7%A7/"
           data-tag="pytorch"
           data-author="" >
            <span class="post-title" title="pytorch冻结网络模型">pytorch冻结网络模型</span>
            <span class="post-date" title="2022-11-08 09:49:41">2022/11/08</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/UAV&Satellite/%E5%BC%80%E9%A2%98%E7%9B%B8%E5%85%B3/"
           data-tag="图像匹配"
           data-author="" >
            <span class="post-title" title="UAV和卫星图像配准思路">UAV和卫星图像配准思路</span>
            <span class="post-date" title="2022-11-08 09:49:41">2022/11/08</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/UAV&Satellite/%E8%B0%83%E7%A0%94/"
           data-tag="图像匹配"
           data-author="" >
            <span class="post-title" title="UAV和卫星图像配准论文阅读">UAV和卫星图像配准论文阅读</span>
            <span class="post-date" title="2022-11-08 09:49:41">2022/11/08</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/Feature%20Matching/LoFTR/"
           data-tag="特征匹配"
           data-author="" >
            <span class="post-title" title="LoFTR代码">LoFTR代码</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/test_time_adaptation/%E7%90%86%E8%A7%A3BN/"
           data-tag="batch norm"
           data-author="" >
            <span class="post-title" title="理解BN">理解BN</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/test_time_adaptation/Low%20Dimensional%20Trajectory%20Hypothesis%20is%20True/"
           data-tag="test time adaptation"
           data-author="" >
            <span class="post-title" title="子空间论文阅读">子空间论文阅读</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/test_time_adaptation/TENT/"
           data-tag="test time adaptation"
           data-author="" >
            <span class="post-title" title="TENT论文阅读">TENT论文阅读</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/test_time_adaptation/%E5%BC%80%E9%A2%98/"
           data-tag="test time adaptation"
           data-author="" >
            <span class="post-title" title="TTA开题">TTA开题</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/11/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/test_time_adaptation/%E6%B3%9B%E8%AF%BB/"
           data-tag="test time adaptation"
           data-author="" >
            <span class="post-title" title="TTA论文泛读">TTA论文泛读</span>
            <span class="post-date" title="2022-11-07 09:49:41">2022/11/07</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/10/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"
           data-tag="目标检测"
           data-author="" >
            <span class="post-title" title="目标检测基础知识">目标检测基础知识</span>
            <span class="post-date" title="2022-10-26 15:49:06">2022/10/26</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/04/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/Feature%20Matching/%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/"
           data-tag="图像匹配"
           data-author="" >
            <span class="post-title" title="特征匹配论文">特征匹配论文</span>
            <span class="post-date" title="2022-04-10 16:52:31">2022/04/10</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2022/01/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/yolo/"
           data-tag="yolo"
           data-author="" >
            <span class="post-title" title="YOLO使用">YOLO使用</span>
            <span class="post-date" title="2022-01-01 13:23:06">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/"
           data-tag="位姿估计"
           data-author="" >
            <span class="post-title" title="飞机6D位姿估计">飞机6D位姿估计</span>
            <span class="post-date" title="2021-12-10 16:52:31">2021/12/10</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/SLAM%E5%8D%81%E5%9B%9B%E8%AE%B2/"
           data-tag="SLAM"
           data-author="" >
            <span class="post-title" title="SLAM十四讲代码bug及解决">SLAM十四讲代码bug及解决</span>
            <span class="post-date" title="2021-11-24 18:50:44">2021/11/24</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BA%8B%E4%BB%B6%E7%9B%B8%E6%9C%BA/%E8%B0%83%E7%A0%94/"
           data-tag="事件相机"
           data-author="" >
            <span class="post-title" title="事件相机调研">事件相机调研</span>
            <span class="post-date" title="2021-11-10 19:49:06">2021/11/10</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/10/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%A8%E5%8E%BB%E9%9B%BE/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE%E6%95%B4%E7%90%86/"
           data-tag="dehazing,haze removal"
           data-author="" >
            <span class="post-title" title="图像去雾去雨论文整理">图像去雾去雨论文整理</span>
            <span class="post-date" title="2021-10-22 12:00:00">2021/10/22</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/10/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E5%8D%AB%E6%98%9F%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1/"
           data-tag="位姿估计"
           data-author="" >
            <span class="post-title" title="卫星姿态估计调研">卫星姿态估计调研</span>
            <span class="post-date" title="2021-10-20 09:49:41">2021/10/20</span>
        </a>
        
        
        <a  class="全部文章 位姿估计 "
           href="/2021/10/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1%E5%9F%BA%E7%A1%80(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/"
           data-tag="位姿估计"
           data-author="" >
            <span class="post-title" title="位姿估计基础及论文">位姿估计基础及论文</span>
            <span class="post-date" title="2021-10-20 09:49:41">2021/10/20</span>
        </a>
        
        
        <a  class="全部文章 软件使用 "
           href="/2021/10/08/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/%E5%85%B6%E4%BB%96/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="其他软件使用">其他软件使用</span>
            <span class="post-date" title="2021-10-08 09:49:41">2021/10/08</span>
        </a>
        
        
        <a  class="全部文章 软件使用 "
           href="/2021/09/23/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/ubuntu(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220829094535)/"
           data-tag="ubuntu"
           data-author="" >
            <span class="post-title" title="ubuntu相关">ubuntu相关</span>
            <span class="post-date" title="2021-09-23 10:29:44">2021/09/23</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/09/23/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%A8%E5%8E%BB%E9%9B%BE/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE/"
           data-tag="dehazing,heze removal"
           data-author="" >
            <span class="post-title" title="图像去雾">图像去雾</span>
            <span class="post-date" title="2021-09-23 10:29:44">2021/09/23</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/09/05/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/HDLBits%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/"
           data-tag="verilog,数电"
           data-author="" >
            <span class="post-title" title="HDLBits刷题笔记">HDLBits刷题笔记</span>
            <span class="post-date" title="2021-09-05 11:16:10">2021/09/05</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/08/04/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/ZYNQ%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="ZYNQ,vivado"
           data-author="" >
            <span class="post-title" title="ZYNQ学习笔记">ZYNQ学习笔记</span>
            <span class="post-date" title="2021-08-04 19:03:34">2021/08/04</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/07/30/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/HLS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="HLS"
           data-author="" >
            <span class="post-title" title="HLS学习笔记">HLS学习笔记</span>
            <span class="post-date" title="2021-07-30 10:15:16">2021/07/30</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/07/30/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/vivado2020-2%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"
           data-tag="vivado"
           data-author="" >
            <span class="post-title" title="vivado2020.2安装教程">vivado2020.2安装教程</span>
            <span class="post-date" title="2021-07-30 09:39:08">2021/07/30</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/07/23/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/%E3%80%90FPGA%E3%80%91%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"
           data-tag="图像处理"
           data-author="" >
            <span class="post-title" title="【FPGA】图像处理">【FPGA】图像处理</span>
            <span class="post-date" title="2021-07-23 14:52:46">2021/07/23</span>
        </a>
        
        
        <a  class="全部文章 FPGA "
           href="/2021/07/16/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/FPGA/verilog%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="verilog,modelsim"
           data-author="" >
            <span class="post-title" title="verilog学习笔记">verilog学习笔记</span>
            <span class="post-date" title="2021-07-16 15:50:28">2021/07/16</span>
        </a>
        
        
        <a  class="全部文章 嵌入式和硬件 "
           href="/2021/03/13/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/%E3%80%90%E7%94%B5%E8%B5%9B%E3%80%91%E7%BA%BF%E8%B7%AF%E8%B4%9F%E8%BD%BD%E5%8F%8A%E6%95%85%E9%9A%9C%E6%A3%80%E6%B5%8B%E8%A3%85%E7%BD%AE/"
           data-tag="线路故障检测,自平衡电桥,正交解调，FPGA"
           data-author="" >
            <span class="post-title" title="【电赛】线路负载及故障检测装置">【电赛】线路负载及故障检测装置</span>
            <span class="post-date" title="2021-03-13 20:43:36">2021/03/13</span>
        </a>
        
        
        <a  class="全部文章 嵌入式和硬件 "
           href="/2021/03/12/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%92%8C%E7%A1%AC%E4%BB%B6/%E3%80%90%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1%E3%80%91%E5%9F%BA%E4%BA%8EAtlas-200-DK%E7%9A%84%E9%9A%9C%E7%A2%8D%E7%89%A9%E8%AF%86%E5%88%AB%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"
           data-tag="Atlas,深度学习,神经网络,障碍物识别,目标识别"
           data-author="" >
            <span class="post-title" title="【本科毕业设计】基于Atlas_200_DK的障碍物识别系统设计与实现">【本科毕业设计】基于Atlas_200_DK的障碍物识别系统设计与实现</span>
            <span class="post-date" title="2021-03-12 19:20:57">2021/03/12</span>
        </a>
        
        
        <a  class="全部文章 软件使用 "
           href="/2021/02/12/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/%E5%B8%B8%E7%94%A8hexo%E5%8D%9A%E5%AE%A2%E6%93%8D%E4%BD%9C/"
           data-tag="hexo指令"
           data-author="" >
            <span class="post-title" title="常用hexo博客操作">常用hexo博客操作</span>
            <span class="post-date" title="2021-02-12 13:14:45">2021/02/12</span>
        </a>
        
        
        <a  class="全部文章 计算机视觉 "
           href="/2021/01/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E5%8D%AB%E6%98%9F%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1review/"
           data-tag="位姿估计"
           data-author="" >
            <span class="post-title" title="卫星姿态估计综述">卫星姿态估计综述</span>
            <span class="post-date" title="2021-01-16 10:42:41">2021/01/16</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-计算机视觉/位姿估计/飞机姿态估计(杨业鹏-20220310203222)" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">飞机6D位姿估计</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="计算机视觉">计算机视觉</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">位姿估计</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2023-03-11 14:05:49'>2021-12-10 16:52</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E6%9C%BA%E5%8F%82%E6%95%B0-%EF%BC%88opencv-%E6%98%AF%E7%AB%96%E7%9D%80%E6%9D%A5%E7%9A%84%EF%BC%89"><span class="toc-text">相机参数 （opencv 是竖着来的）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E7%82%B9%E6%8F%90%E5%8F%96%E6%B5%8B%E8%AF%95"><span class="toc-text">特征点提取测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sift"><span class="toc-text">sift</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#orb"><span class="toc-text">orb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%9B%BE%E5%83%8F%E6%B2%BFx%E8%BD%B4%E7%BF%BB%E8%BD%AC%E5%90%8E%E9%AA%8C%E8%AF%81%E5%8C%B9%E9%85%8D%E6%95%88%E6%9E%9C-%E7%BF%BB%E8%BD%AC%E4%B8%8D%E5%90%8C%E4%BA%8E%E6%97%8B%E8%BD%AC"><span class="toc-text">将图像沿x轴翻转后验证匹配效果(翻转不同于旋转)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LoFTR-%E6%95%88%E6%9E%9C"><span class="toc-text">LoFTR 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#orb%E7%9A%84%E6%B5%8B%E8%AF%95"><span class="toc-text">orb的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E5%B0%9D%E8%AF%95%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">可以尝试下面的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9C6D%E5%A7%BF%E6%80%81%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-text">制作6D姿态数据集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E9%9B%86%E6%AD%A5%E9%AA%A4"><span class="toc-text">生成自定义数据集步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%BB%AD%E5%AE%89%E6%8E%92"><span class="toc-text">后续安排</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E5%8F%82%E8%80%83"><span class="toc-text">有价值的参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%8D%95%E5%BA%94%E5%88%86%E6%95%B0"><span class="toc-text">计算单应分数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E7%BB%B4%E9%87%8D%E5%BB%BA"><span class="toc-text">三维重建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#colmap"><span class="toc-text">colmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#opencv-sfm"><span class="toc-text">opencv sfm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B2%BE%E5%BA%A6%E6%B5%8B%E8%AF%95"><span class="toc-text">精度测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B"><span class="toc-text">改进</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E7%82%B9%E6%A3%80%E6%B5%8B"><span class="toc-text">关键点检测</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85"><span class="toc-text">打包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">问题及解决方案</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>数据集不是问题，只需要模型，每张图片的姿态，mask（这个可以由前两者知道）</p>
<p>可以用来制作数据集<a target="_blank" rel="noopener" href="https://github.com/3D-FRONT-FUTURE/3D-FUTURE-ToolBox#model-aligned-rendering">GitHub - 3D-FRONT-FUTURE/3D-FUTURE-ToolBox: FUTURE3D Toolbox: Rendering, Projection, and Re-Projection</a></p>
<p>opencv姿态估计</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220218151001060.png" alt="image-20220218151001060"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220218151033771.png" alt="image-20220218151033771"></p>
<h2 id="相机参数-（opencv-是竖着来的）"><a href="#相机参数-（opencv-是竖着来的）" class="headerlink" title="相机参数 （opencv 是竖着来的）"></a>相机参数 （opencv 是竖着来的）</h2><p><strong>牛博相机</strong></p>
<p>内参</p>
<p>792.216153833603    0    0<br>0    791.177146289919    0<br>308.699841948659    229.681830886849    1</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220219165155403.png" alt="image-20220219165155403"></p>
<p>畸变系数</p>
<p>​      cameraParams.RadialDistortion                          0.159289987523910    -0.944011768029619</p>
<p>​      cameraParams.TangentialDistortion                  0    0</p>
<p>​      cameraParams.EstimateTangentialDistortion   0</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222191218258.png" alt="image-20220222191218258"></p>
<p><strong>涛哥相机</strong></p>
<p>内参</p>
<p>1312.06174094713    0    0<br>0    1309.31954409816    0<br>916.121844560839    518.441493882532    1</p>
<p>畸变系数</p>
<p>​    cameraParams.RadialDistortion                          -0.369910731594361    0.123663102946957</p>
<p>​      cameraParams.TangentialDistortion                  0    0</p>
<p>​      cameraParams.EstimateTangentialDistortion  0</p>
<p><strong>工业相机</strong></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220306194950707.png" alt="image-20220306194950707"></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gooutlook/p/15240265.html">https://www.cnblogs.com/gooutlook/p/15240265.html</a></p>
<p>然后就可以用cv2.VideoCapture()运行了</p>
<p>12mm镜头：</p>
<p>内参</p>
<p>3603.41629066370                               0                                              0<br>0                                                          3598.94564763421                   0<br>717.982210742481                          516.831199201901                   1</p>
<p>畸变系数</p>
<p>cameraParams.RadialDistortion          0.125212949613634    -0.596274067781849</p>
<p>cameraParams.TangentialDistortion                  0                                  0</p>
<p>cameraParams.EstimateTangentialDistortion  0</p>
<p>6mm镜头：</p>
<p>内参：</p>
<p>1839.64945443219    0    0<br>0    1839.25847451371    0<br>675.840419167291    550.401546804488    1</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220716191300260">/image-20220716191300260.png)</p>
<p>畸变系数：</p>
<p>cameraParams.RadialDistortion         0.0154582469945801    -0.0450341498973294</p>
<p>cameraParams.TangentialDistortion                  0                                  0</p>
<p>cameraParams.EstimateTangentialDistortion  0</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220716191529975">/image-20220716191529975.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220716191619052">/image-20220716191619052.png)</p>
<p><strong>手机相机</strong></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220429103711210">/image-20220429103711210.png)</p>
<p>2304.000000, 2304.000000, 960.000000, 540.000000, 0.000000, 0.000000, 0.000000, 0.000000</p>
<p>opencv格式：</p>
<p>2304.000000        0        960.000000    0     2304.000000    540.000000   0     0       1 </p>
<p>python调用手机ip摄像头<a target="_blank" rel="noopener" href="https://www.csdn.net/tags/MtjakgxsMDQ3Ni1ibG9n.html">(42条消息) python调用手机摄像头 - CSDN</a></p>
<h2 id="特征点提取测试"><a href="#特征点提取测试" class="headerlink" title="特征点提取测试"></a>特征点提取测试</h2><h3 id="sift"><a href="#sift" class="headerlink" title="sift"></a>sift</h3><p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220219171551879.png" alt="image-20220219171551879"></p>
<p>匹配成功的特征点数目为：142，筛选后的特征点数目为：60,ransac后的特征点数目为：28<br>时间：0.240354s</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222094720459.png" alt="image-20220222094720459"></p>
<h3 id="orb"><a href="#orb" class="headerlink" title="orb"></a>orb</h3><p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220219171614674.png" alt="image-20220219171614674"></p>
<p>匹配成功的特征点数目为：468，筛选后的特征点数目为：180,ransac后的特征点数目为：75<br>时间：0.237791s</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222094802357.png" alt="image-20220222094802357"></p>
<p>3dmodel的细节太少，完全配不准</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222093435654.png" alt="image-20220222093435654"></p>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>基于对应关系的方法主要针对纹理丰富的目标物体，首先将需要计算位姿的目标物体的3D模型投影到N个角度，得到N张2D模板图像，记录这些模板图上2D像素和真实3D点的对应关系。当单视角相机采集到RGB图像后，通过特征提取（SIFT，FAST，ORB等），寻找特征点与模板图片之间的对应关系。通过这种方式，可以得到当前相机采集图像的2D像素点与3D点的对应关系。最后使用PnP算法即可恢复当前视角下图像的位姿。</p>
<p>如果目标物体有丰富纹理，可以寻找当前目标2D特征点与模版图像中特征点的对应，而模板图像的特征点具有3D坐标，这样就可以使用PNP算法得到物体6D位姿了；具体可以参考ORB-SLAM2，先构建场景的稀疏3D点，同时保存一些关键帧，关键帧上的2D ORB特征点对应3D点，这样可以对当前目标图像，寻找最相似关键帧，然后根据ORB特征点的匹配使用PNP得到粗位姿(重定位)，也可以再用BA优化；如果想要去除背景干扰，可以检测出目标物体再匹配；</p>
<p>2.如果目标是弱纹理或者没有纹理，那么可以利用轮廓匹配，此时模板图像可以是轮廓图，可以看看LineMode或者一些基于草图的3D模型检索算法，将当前目标提取的轮廓图和已有的模版轮廓图匹配，寻找最相似轮廓图对应的6D位姿；Vuforia有物体3D检测跟踪的Demo，变换视角使当前目标的轮廓和预先设定的轮廓重合，表示得到对应的位姿，再进行跟踪；3.基于RGB图像获得物体的深度图，转为点云和已有3D模型的点云进行粗配准和细配准，单目的有很多基于深度学习的算法，双目的可以自己算；4.如果能够具有高逼真3D模型，可以基于仿真环境生成大量虚拟6D位姿训练集，再在少量真实采集的6D位姿数据集上FineTune，应该是也可以的；你看情况试一试，方法的鲁棒性得看目标物体本身的特性以及具体应用场景的复杂程度吧；</p>
<p>采集数据（包括RGB和深度图）</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222165734657.png" alt="image-20220222165734657"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222210155972.png" alt="image-20220222210155972"></p>
<p>杂乱背景下</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220222211656964.png" alt="image-20220222211656964"></p>
<ol>
<li>RGB-D 图像中的rgb图片提供了像素坐标系下的x，y坐标，而深度图直接提供了相机坐标系下的𝑍坐标，也就是相机与点的距离。</li>
<li>根据 RGB-D 图像的信息和相机的内参，可以计算出任何一个像素点在<strong>相机坐标系</strong>下的坐标。</li>
<li>根据 RGB-D 图像的信息和相机的内参与外参，可以计算出任何一个像素点在世界坐标系下的坐标。</li>
<li>相机视野范围内，相机坐标系下的障碍物点的坐标，就是<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=点云&amp;spm=1001.2101.3001.7020">点云</a>传感器数据，也就是相机坐标系下的点云数据。点云传感器数据可以根据 RGB-D 图像提供的坐标与相机内参算出来。</li>
<li>所有世界坐标系下的障碍物点的坐标，就是点云地图数据，也就是世界坐标系下的点云数据。点云地图数据可以根据RGB-D 图像提供的坐标与相机内参和外参算出来。</li>
</ol>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220224172757631.png" alt="image-20220224172757631"></p>
<p>svm分类 2d-3d配准</p>
<h3 id="将图像沿x轴翻转后验证匹配效果-翻转不同于旋转"><a href="#将图像沿x轴翻转后验证匹配效果-翻转不同于旋转" class="headerlink" title="将图像沿x轴翻转后验证匹配效果(翻转不同于旋转)"></a>将图像沿x轴翻转后验证匹配效果(翻转不同于旋转)</h3><p>orb+单应</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220301103819128.png" alt="image-20220301103819128"></p>
<p>sift+单应 （效最好）</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220301104133380.png" alt="image-20220301104133380"></p>
<p>sift+基础矩阵（误配太多）</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220301104729842.png" alt="image-20220301104729842"></p>
<p>经测试，sift+单应ransac效果最好</p>
<p>flann匹配效果还不如暴力匹配，且时间也不会快很多，如下为flann匹配效果</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220301140828199.png" alt="image-20220301140828199"></p>
<p>ransac 次数太少导致算的不准确</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Celebrandil/CudaSift">Celebrandil/CudaSift: A CUDA implementation of SIFT for NVidia GPUs (1.2 ms on a GTX 1060) (github.com)</a></p>
<p>ransac算法当匹配不到的时候会出现这种情况</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220330153303463">/image-20220330153303463.png)</p>
<p>或许自己编写ransac，可以排除多点汇聚一点的情况</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hughesj919/HomographyEstimation/blob/master/Homography.py">HomographyEstimation/Homography.py at master · hughesj919/HomographyEstimation (github.com)</a></p>
<h3 id="LoFTR-效果"><a href="#LoFTR-效果" class="headerlink" title="LoFTR 效果"></a>LoFTR 效果</h3><p><a target="_blank" rel="noopener" href="https://colab.research.google.com/drive/1BgNIOjFHauFoNB95LGesHBIjioX74USW?usp=sharing#scrollTo=BSBHOV3GFUc3">LoFTR_demo_single_pair.ipynb - Colaboratory (google.com)</a></p>
<p>outdoor_ds</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/data/blog/计算机视觉/位姿估计/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220810150819782">/image-20220810150819782.png)</p>
<p>indoor_ds_new</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/data/blog/计算机视觉/位姿估计/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220810150737221">/image-20220810150737221.png)</p>
<pre class=" language-lang-python"><code class="language-lang-python"># Draw 
# M, mask = cv2.findHomography(mkpts0, mkpts1, method=cv2.RANSAC, ransacReprojThreshold=1.0,confidence=0.9999,maxIters=10000)
M, mask = cv2.findFundamentalMat(mkpts0, mkpts1, method=cv2.RANSAC, ransacReprojThreshold=1.0,confidence=0.9999,maxIters=10000)
print(mkpts0.shape)
kps0 = []
kps1 = []
mconf_1 = []
for i in range(len(mask)):
    if mask[i] == 1:
        kps0.append(mkpts0[i])
        kps1.append(mkpts1[i])
        mconf_1.append(mconf[i])
mkpts0 = np.float32(kps0).reshape(-1,2)
mkpts1 = np.float32(kps1).reshape(-1,2)
mconf = mconf_1
print(mkpts0.shape)
print(mconf)
color = cm.jet(mconf, alpha=0.7)
text = [
    'LoFTR',
    'Matches: {}'.format(len(mkpts0)),
]
fig = make_matching_figure(img0_raw, img1_raw, mkpts0, mkpts1, color, mkpts0, mkpts1, text)

# A high-res PDF will also be downloaded automatically.
make_matching_figure(img0_raw, img1_raw, mkpts0, mkpts1, color, mkpts0, mkpts1, text, path="LoFTR-colab-demo.pdf")
files.download("LoFTR-colab-demo.pdf")
</code></pre>
<p>不加ransac</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110121475">/image-20220722110121475.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722105527038">/image-20220722105527038.png)</p>
<p>加ransac</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722105557805">/image-20220722105557805.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="Image">/E-7cRlXXEAQm4rP)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="Image">/E-7fUp5WEAAda8S)</p>
<p>对于旋转图像不行</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805141445728">/image-20220805141445728.png)</p>
<p>ransac后</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805141537159">/image-20220805141537159.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805141954237">/image-20220805141954237.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805141937782">/image-20220805141937782.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805142217265">/image-20220805142217265.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805142224530">/image-20220805142224530.png)</p>
<p>对于upright图像效果就很好</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220805142459812">/image-20220805142459812.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/选区_015.png" alt="选区_015" style="zoom: 20%;"><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/选区_016-1659870333888.png" alt="选区_016" style="zoom: 20%;"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807190447071">/image-20220807190447071.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807190323929">/image-20220807190323929.png)</p>
<p>旋转测试 10°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807191915518">/image-20220807191915518.png)</p>
<p>20°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807192011326">/image-20220807192011326.png)</p>
<p>30°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193601106">/image-20220807193601106.png)</p>
<p>40°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193249541">/image-20220807193249541.png)</p>
<p>单应矩阵</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193446637">/image-20220807193446637.png)</p>
<p>基础矩阵</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807200756731">/image-20220807200756731.png)</p>
<p>50°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193851167">/image-20220807193851167.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193858105">/image-20220807193858105.png)</p>
<p>60°</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807193951562">/image-20220807193951562.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807194001962">/image-20220807194001962.png)</p>
<p>orb具有旋转不变性</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807201347923">/image-20220807201347923.png)</p>
<p>其他视角测试</p>
<p>感觉下面这张图，一些语义上的明显特征并没有检测出来，比如转角处</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807195418356">/image-20220807195418356.png)</p>
<p>用findFundamentalMat后还行</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807200350733">/image-20220807200350733.png)</p>
<p>orb效果不行</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220807202758873">/image-20220807202758873.png)</p>
<h3 id="orb的测试"><a href="#orb的测试" class="headerlink" title="orb的测试"></a>orb的测试</h3><p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722105926685">/image-20220722105926685.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110035632">/image-20220722110035632.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110443971">/image-20220722110443971.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110533388">/image-20220722110533388.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110213392">/image-20220722110213392.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220722110326300">/image-20220722110326300.png)</p>
<h3 id="可以尝试下面的方法"><a href="#可以尝试下面的方法" class="headerlink" title="可以尝试下面的方法"></a>可以尝试下面的方法</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shuimuqingyang/p/14428270.html">修改OpenCV一行代码，提升14%图像匹配效果 - 水木清扬 - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/iago-suarez/beblid-opencv-demo/blob/main/demo.py">beblid-opencv-demo/demo.py at main · iago-suarez/beblid-opencv-demo (github.com)</a></p>
<p>经过测试，该描述子（BEBLID）效果比ORB更好，匹配对数更多，且计算更快</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220325134532890">/image-20220325134532890.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220325134541777">/image-20220325134541777.png)</p>
<h2 id="制作6D姿态数据集"><a href="#制作6D姿态数据集" class="headerlink" title="制作6D姿态数据集"></a>制作6D姿态数据集</h2><p><a target="_blank" rel="noopener" href="https://github.com/DLR-RM/BlenderProc">https://github.com/DLR-RM/BlenderProc</a></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/data/blog/AI/飞机姿态估计/image-20220303204720768.png" alt="image-20220303204720768"></p>
<p>While distance and depth images sound similar, <strong>they are not the same</strong>: In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Range_imaging">distance images</a>, each pixel contains the actual distance from the camera position to the corresponding point in the scene. In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Depth_map">depth images</a>, each pixel contains the distance between the camera and the plane parallel to the camera which the corresponding point lies on.</p>
<p>在距离图像中，每个像素包含从相机位置到场景中相应点的实际距离。</p>
<p>在深度图像中，每个像素包含相机和平行于相机的平面之间的距离，对应点位于该平面上。</p>
<p>要算PNP应该用 <strong>depth image</strong></p>
<p>在bop_object_pose_sampling中ply格式带颜色可以直接显示颜色</p>
<pre><code>blenderproc run examples/datasets/bop_object_on_surface_sampling/main.py 
              &lt;path_to_bop_data&gt; 
              &lt;bop_dataset_name&gt; 
              resources/cctextures 
              examples/datasets/bop_object_on_surface_sampling/output

blenderproc run examples/datasets/bop_object_on_surface_sampling/main.py /media/young/young/dataset/linemod lm cc1 examples/datasets/bop_object_on_surface_sampling/output
</code></pre><p>blenderproc run blenderproc/scripts/download_cc_textures_1.py cc1</p>
<pre><code>blenderproc run examples/datasets/bop_challenge/config_lm_upright.yaml /media/young/young/dataset/linemod lm /home/young/code/bop_toolkit cc1 examples/datasets/bop_challenge/output
</code></pre><p>blenderproc run blenderproc/scripts/download_cc_textures_1.py cc1</p>
<p>​              </p>
<pre><code>blenderproc run examples/datasets/bop_challenge/config_lm_upright.yaml /media/young/young/dataset/linemod lm /home/young/code/bop_toolkit cc1 examples/datasets/bop_challenge/output
blenderproc run examples/datasets/bop_challenge/main_lm_upright.py /media/young/young/dataset/linemod cc1  examples/datasets/bop_challenge/output --num_scenes=1

blenderproc run examples/datasets/bop_challenge/main_tless_random_test.py /media/young/young/dataset/linemod cc1  examples/datasets/bop_challenge/output2 --num_scenes=1
</code></pre><p><strong>进入debug模式</strong></p>
<pre><code>import pydevd_pycharm
pydevd_pycharm.settrace('localhost', port=12345, stdoutToServer=True, stderrToServer=True)
</code></pre><h4 id="生成自定义数据集步骤"><a href="#生成自定义数据集步骤" class="headerlink" title="生成自定义数据集步骤"></a>生成自定义数据集步骤</h4><p>1.在blenderproc主目录下运行（base环境）<strong>生成深度图和RGB</strong></p>
<p>blenderproc run examples/datasets/bop_challenge/main_tless_random_test.py /media/young/young/dataset/linemod cc1  examples/datasets/bop_challenge/output2 —num_scenes=1</p>
<p>然后在生成的数据集目录下加入模型文件</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220307221151331.png" alt="image-20220307221151331" style="zoom:50%;"></p>
<p>2.运行calc_gt_masks.py（test环境）在/home/young/code/bop_toolkit/下  <strong>生成mask</strong></p>
<p>python calc_gt_masks.py</p>
<h4 id="后续安排"><a href="#后续安排" class="headerlink" title="后续安排"></a>后续安排</h4><ol>
<li>选择合适的算法并测试效果，最好是能直接接入视频流的</li>
<li>自己用数据集训练</li>
<li>训练测试效果</li>
<li>思考改进</li>
</ol>
<p>▪</p>
<p>▪ 测试传统方案模板切换效果</p>
<p>▪测试传统方案模板切换效果，拍摄了从飞机头向机尾方向拍摄的十几张模板图像，根据匹配的数量来切换模板：当匹配数低于一定数量时，切换模板，遍历所有模板并选择匹配数最高的那一个作为当前模板。</p>
<p>▪ 研究svm识别特征点的方案</p>
<p>▪1. 数据集制作：先用sift提取特征点，每张图手动选取空间位置相同的N个关键点，在这些关键点周围选择一个patch，即每张图选择N个以关键点为中心的patch</p>
<p>▪2. 训练N个SVM对来识别输入的patch是不是属于这一类</p>
<p>▪3. 最终测试时也是先提取特征点周围的patch作为SVM的输入，判断是否属于某一类关键点</p>
<p>▪4. 根据识别出的关键点进行pnp解算位姿</p>
<h2 id="有价值的参考"><a href="#有价值的参考" class="headerlink" title="有价值的参考"></a>有价值的参考</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=iIAoc99doI4">Object pose estimation and tracking using OpenCV APIs. - YouTube</a></p>
<p>核心思想：</p>
<p>1.Capture the scene from two views.2. Estimate the sift features in both image. 3. Pair the matching features and using triangulation, compute the corresponding 3D coordinates wrt local object frame. 4. Now you have object image, its Sift features and descriptors, and corresponding to each features you have its 3D coordinates.  5. Compute the sift features on new image and compare with the saved features and you will have your object pose in new image.</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220326100404001.png" alt="image-20220326100404001" style="zoom:30%;"></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=UJtpBxdDVDU">[IROS’12] 3D Textureless Object Detection and Tracking: An Edge-based Approach - YouTube</a></p>
<p>传统的基于边缘的无纹理姿态估计（有空可以参考一下）</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=lbgl2u6KrDU">Measure the size of an object | with Opencv, Aruco marker and Python - YouTube</a></p>
<p>通过使用Aruco marker来进行物体的尺寸估计(矩形物体)</p>
<p>其实和姿态估计关联性不大，相机只能正对，通过检测标志，进行等比例的尺寸估计</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220326100539423.png" alt="image-20220326100539423" style="zoom:25%;"></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Eq2WNv1blfc">OpenCV tutorial: Real Time pose estimation of a textured object (BRISK) - YouTube</a></p>
<p>opencv官方实例，c++实现</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=US9p9CL9Ywg">Pose Estimation of Objects in OpenCV Python - YouTube</a></p>
<p>估计棋盘格的位姿，不过默认深度为零，值得参考</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=LjjJQ81RbX0">Optical Flow Tracking Grid and its use for Real-Time Object Detection - YouTube</a></p>
<p>光流法进行物体实时跟踪</p>
<p><strong>这个代码的思想可以借鉴，以及写代码的格式可以学习</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/GigaFlopsis/image_pose_estimation/blob/63926444e53b227d3e65ca9a27f4b2512ee72386/src/image_processing.py#L150">image_pose_estimation/image_processing.py at 63926444e53b227d3e65ca9a27f4b2512ee72386 · GigaFlopsis/image_pose_estimation (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=V6yGv8Z46hM">Ros Image Pose Estimation with blur detector - YouTube</a></p>
<p><strong>这个人的视频挺好的</strong>    不过主要是了解一些库的使用</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=US9p9CL9Ywg">Pose Estimation of Objects in OpenCV Python - YouTube</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/niconielsen32/ComputerVision">niconielsen32/ComputerVision (github.com)</a></p>
<p>飞机图像分割</p>
<p><a target="_blank" rel="noopener" href="https://github.com/rguitar96/airplane-segmentation/blob/main/image-segmentation.ipynb">airplane-segmentation/image-segmentation.ipynb at main · rguitar96/airplane-segmentation (github.com)</a></p>
<p><strong>orb-slam值得借鉴</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/raulmur/ORB_SLAM/blob/master/src/Initializer.cc">ORB_SLAM/Initializer.cc at master · raulmur/ORB_SLAM (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/borgwang/orb-slam-py/blob/master/vo.py">orb-slam-py/vo.py at master · borgwang/orb-slam-py (github.com)</a></p>
<h2 id="计算单应分数"><a href="#计算单应分数" class="headerlink" title="计算单应分数"></a>计算单应分数</h2><p>symmetric transfer errors<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_17496535/article/details/51673285">(23条消息) 重投影误差与对称转移误差<em>MeJnCode的博客-CSDN博客</em>重投影误差</a></p>
<p>matchsocre</p>
<p>​    91530.96435108903</p>
<p>knnmatchscore</p>
<p>​    126337.44244072789      34.97s      兼具速度和分数    </p>
<p>bfsocre</p>
<p>​    131447.43567962793  速度最慢但是分数高</p>
<p>灰度+knnmatch        用灰度图效果貌似和彩色差不多</p>
<p>total_score: 128866.53040396319<br>总时间：34.372146s</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220330105008400">/image-20220330105008400.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220330170325486">/image-20220330170325486.png)</p>
<p>以上的情况要么是初步筛选不够，要么是点选的太多了，</p>
<p>飞机轮廓</p>
<p>sfm</p>
<p>算rotation</p>
<pre><code>orb.detect_and_compute_beblid_knn(max_temp_pic,input_image,0.93,ransacReprojThreshold=2,confidence=0.95,maxIters=10000)
total_score: 108451.39269577163

 orb.detect_and_compute_beblid_bf(max_temp_pic,input_image,3,ransacReprojThreshold=2,confidence=0.95,maxIters=10000)
total_score: 94354.40717807441

orb.detect_and_compute_orb_bf(max_temp_pic,input_image,3,ransacReprojThreshold=2,confidence=0.95,maxIters=10000)
total_score: 49999.934895973216


self.orb = cv.ORB_create(extract_number, 1.2, 8, 10, 0, 2, cv.ORB_HARRIS_SCORE, 10, 20)
self.descriptor = cv.xfeatures2d.BEBLID_create(2)
total_score: 115350.02440894888
</code></pre><h2 id="三维重建"><a href="#三维重建" class="headerlink" title="三维重建"></a>三维重建</h2><p>完整流程参考<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=bDHJM6nAKtc">Creating 3D Game Models from Video using Photogrammetry - YouTube</a></p>
<h3 id="colmap"><a href="#colmap" class="headerlink" title="colmap"></a>colmap</h3><p><a target="_blank" rel="noopener" href="https://icode.best/i/80715147507186">【踩坑】colmap中的相机位姿定义及其可视化结果的隐含转换-爱代码爱编程 (icode.best)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/94196a92cc18">SIFT特征详解 - 简书 (jianshu.com)</a></p>
<p>使用17张图进行3维重建 <img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220224200905982.png" alt="image-20220224200905982"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/data/blog/AI/飞机姿态估计.assets/2022-02-28 16-49-13 的屏幕截图.png" alt="2022-02-28 16-49-13 的屏幕截图"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/data/blog/AI/飞机姿态估计.assets/2022-02-28 16-50-05 的屏幕截图.png" alt="2022-02-28 16-50-05 的屏幕截图"></p>
<p><a target="_blank" rel="noopener" href="https://colmap.github.io/format.html">Output Format — COLMAP 3.8 documentation</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/GarfieldEr007/article/details/50333157">(25条消息) 尺度不变特征转换SIFT_GarfieldEr007的博客-CSDN博客</a></p>
<p>读取colmap生成的文件信息：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/SBCV/Blender-Addon-Photogrammetry-Importer/blob/f79c09ea9eda34574d20ed05ceda9226ce7f778c/photogrammetry_importer/ext/read_write_model.py">Blender-Addon-Photogrammetry-Importer/read_write_model.py at f79c09ea9eda34574d20ed05ceda9226ce7f778c · SBCV/Blender-Addon-Photogrammetry-Importer (github.com)</a></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220422114317283.png" alt="image-20220422114317283" style="zoom:50%;"></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220429111227223.png" alt="image-20220429111227223" style="zoom:50%;"></p>
<p>black plane 关键点3d坐标：</p>
<p>-0.750285, 1.89654, 2.12803</p>
<p>2.09217, 2.07706, 3.77801</p>
<p>3.06018, 1.19712, 5.24177</p>
<p>3.62335, 1.34729, 5.57277</p>
<p>3.14614, 2.24611, 4.19743</p>
<p>4.50369, 1.61071, 3.76958（可能不准）</p>
<p>4.71773, 2.53198, 2.84707</p>
<p>3.36851, 3.18192, 3.22556</p>
<p>4.18717, 4.45633, 2.43622</p>
<p>3.66017, 4.333, 2.20296</p>
<p>2.20928, 2.97569, 2.84228</p>
<p>blue plane 关键点3d坐标：</p>
<p>-0.280649, 1.68422, 2.36646</p>
<p>2.54254, 1.73229, 3.39873</p>
<p>3.73118, 0.98228, 4.81425</p>
<p>4.29214, 1.09763, 4.95887</p>
<p>3.77839, 1.93858, 3.73114</p>
<p>4.86345, 1.44302, 3.34977</p>
<p>4.89913, 2.31779, 2.45851</p>
<p>3.80463, 2.78573, 2.84414</p>
<p>4.49756, 3.98496, 2.07535</p>
<p>3.95248, 3.8895, 1.9103</p>
<p>2.59718, 2.55167, 2.60149</p>
<h3 id="opencv-sfm"><a href="#opencv-sfm" class="headerlink" title="opencv sfm"></a>opencv sfm</h3><p><a target="_blank" rel="noopener" href="https://github.com/Ashok93/Structure-From-Motion-SFM-">Ashok93/Structure-From-Motion-SFM-: Structure from Motion (Sfm) in Python using OpenCV (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/CesarAsturias/SFM-and-numerical-optimization">CesarAsturias/SFM-and-numerical-optimization: Structure from Motion with Python and OpenCV, using numerical optimization techniques (github.com)</a>这个代码注释不错</p>
<p><a target="_blank" rel="noopener" href="https://github.com/mapillary/OpenSfM">mapillary/OpenSfM: Open source Structure-from-Motion pipeline (github.com)</a></p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/image-20220405000136370.png" alt="image-20220405000136370" style="zoom:50%;"></p>
<p>这个纯python而且有教程，可以尝试</p>
<p><a target="_blank" rel="noopener" href="https://github.com/muneebaadil/how-to-sfm">muneebaadil/how-to-sfm: A self-reliant tutorial on Structure-from-Motion (github.com)</a></p>
<h2 id="精度测试"><a href="#精度测试" class="headerlink" title="精度测试"></a>精度测试</h2><p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220517164105523">/image-20220517164105523.png)</p>
<h2 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h2><p><a target="_blank" rel="noopener" href="https://opencv.org/evaluating-opencvs-new-ransacs/">https://opencv.org/evaluating-opencvs-new-ransacs/</a>  ransac的改进</p>
<h1 id="关键点检测"><a href="#关键点检测" class="headerlink" title="关键点检测"></a>关键点检测</h1><ul>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43229348/article/details/123500917">如何使用 PyTorch 训练自定义关键点检测模型<em>求则得之，舍则失之的博客-CSDN博客</em>关键点检测模型</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41782172/article/details/119249916?spm=1001.2101.3001.6650.3&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-3-119249916-blog-123500917.pc_relevant_aa2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-3-119249916-blog-123500917.pc_relevant_aa2&amp;utm_relevant_index=4">关键点检测数据准备和基于U-net网络的模型设计——工业组件4个关键点的检测模型<em>君名余曰正则的博客-CSDN博客</em>工业关键点检测</a></p>
<p>  <a target="_blank" rel="noopener" href="https://github.com/ExileSaber/KeyPoint-Detection">ExileSaber/KeyPoint-Detection: 关键点检测的模型，包括直接使用关键点坐标作为返回值、使用heatmap作为返回值的两种模型 (github.com)</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/PaddlePaddle/PaddleDetection/tree/release/2.4/configs/keypoint">PaddleDetection/configs/keypoint at release/2.4 · PaddlePaddle/PaddleDetection · GitHub</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lz0499/article/details/80978433">OpenCV 中图像坐标系统与Python中NumPy Arrays之间的关系_大熊背的博客-CSDN博客_numpy坐标原点</a></p>
</li>
<li><p>数据增强<a target="_blank" rel="noopener" href="https://github.com/DefTruth/torchlm/blob/main/docs/api/transforms.md">torchlm/transforms.md at main · DefTruth/torchlm (github.com)</a></p>
</li>
</ul>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220712144612104">/image-20220712144612104.png)</p>
<p>torch.backends.cudnn.benchmark 可以加速网络</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220717212727457">/image-20220717212727457.png)</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220717212735537">/image-20220717212735537.png)</p>
<p>Traceback (most recent call last):<br>  File “airplane<em>kps<em>pose\main\test_main_yolo.py”, line 11, in <module><br>  File “<frozen importlib._bootstrap="">“, line 991, in _find_and_load<br>  File “<frozen importlib._bootstrap="">“, line 975, in _find_and_load_unlocked<br>  File “<frozen importlib._bootstrap="">“, line 671, in _load_unlocked<br>  File “PyInstaller\loader\pyimod03_importers.py”, line 495, in exec_module<br>  File “torch__init</frozen></frozen></frozen></module></em></em>.py”, line 135, in <module><br>    raise err<br>OSError: [WinError 126] 找不到指定的模块。 Error loading “C:\Users\admin\AppData\Local\Temp_MEI467162\torch\lib\torch_python.dll” or one of its dependencies.</module></p>
<p>把torch_utils.py转成torch_utils.pyc后即可完美运行。(但遇到在别的电脑上不能运行的问题，最后发现与cuda的库没有加进去有关系)</p>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42811827/article/details/124035548?ops_request_misc=%7B%22request%5Fid%22%3A%22165811149016781435485512%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=165811149016781435485512&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-2-124035548-null-null.142^v32^pc_rank_34,185^v2^control&amp;utm_term=pyinstaller打包pytorch&amp;spm=1018.2226.3001.4187">【Pyinstaller打包Pytorch框架】<em>Sleeep</em>的博客-CSDN博客_pytorch 打包</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41870706/article/details/101780731">python项目（非单一.py文件）用Pyinstaller打包发布成exe，在windos上运行程序。_隔壁敲代码的王先生的博客-CSDN博客</a></p>
<pre><code>pyinstaller test_main_yolo.py -D -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\weights -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\runs -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\main\models -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\main\sub_main -p  D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\main\utils -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose\main
</code></pre><p>pyinstaller test_main_yolo.py -D -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\weights -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\runs -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\main\models -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\main\sub_main -p  D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\main\utils -p D:\code\kps_detection\KeyPoint-Detection\airplane_kps_pose_1\main</p>
<h4 id="问题及解决方案"><a href="#问题及解决方案" class="headerlink" title="问题及解决方案"></a>问题及解决方案</h4><p>spec文件如下：</p>
<pre class=" language-lang-python"><code class="language-lang-python"># -*- mode: python ; coding: utf-8 -*-


block_cipher = None


a = Analysis(
    ['test_main_yolo.py'],  #打包的主程序
    pathex=['D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\weights',
    'D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\runs',
    'D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\main\\models',
    'D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\main\\sub_main',
    'D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\main\\utils',
    'D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\main',
    'C:\\Windows\\System32', #这个貌似不用加
    'C:\\Windows\\System32\\downlevel', #这个貌似不用加
    'D:\\programs\\Anaconda\\envs\\pytorch\\Lib\\site-packages\\torch\\lib'], #pathex添加py文件的搜索路径，以及加一些库文件(dll)
    binaries=[],  
    datas=[('D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\weights\\best.pt','weights'),
    ('D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\weights\\min_loss_7_15.pth','weights'),
    ('D:\\code\\kps_detection\\KeyPoint-Detection\\airplane_kps_pose_1\\main\\utils\\torch_utils.pyc','utils')],   #datas放非python文件或非dll文件,每个括号后面的路径的根是生成的dist目录
    hiddenimports=[],
    hookspath=[],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[],
    win_no_prefer_redirects=False,
    win_private_assemblies=False,
    cipher=block_cipher,
    noarchive=False,
)
pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    [],
    exclude_binaries=True,
    name='test_main_yolo',
    debug=False,
    bootloader_ignore_signals=False,
    strip=False,
    upx=True,
    console=True,
    disable_windowed_traceback=False,
    argv_emulation=False,
    target_arch=None,
    codesign_identity=None,
    entitlements_file=None,
)
coll = COLLECT(
    exe,
    a.binaries,
    a.zipfiles,
    a.datas,
    strip=False,
    upx=True,
    upx_exclude=[],
    name='test_main_yolo',
)
</code></pre>
<p>首先安装pyinstaller，推荐使用<code>pip install https://github.com/pyinstaller/pyinstaller/archive/develop.zip</code> (据说这样能装最新的版本，错误更少)</p>
<p>切到主程序所在的目录下，使用 <code>pyinstaller -D XXX.py</code>  会打包成文件夹的形式，这样方便调试。（推荐！）  而使用-F会生成单个exe，运行时exe会解压到c盘的临时目录运行，可能会有路径问题或者运行更慢？</p>
<p>如果提示缺少什么文件，就去修改spec文件，修改后使用pyinstaller XXX.spec 再次打包。</p>
<p>！！！！打包好后可能在自己的电脑上可以正常运行，但在别的电脑上会遇到torch调用的问题，（涉及CUDA），类似下面的情况：</p>
<p>OSError: [WinError 126] 找不到指定的模块。 Error loading “G:\airplane_kps_pose_exe\test_main_yolo\torch\lib\caffe2_detectron_ops_gpu.dll” or one of its dependencies.</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220719185432781">/image-20220719185432781.png)</p>
<p>解决方式，通过<a target="_blank" rel="noopener" href="https://github.com/lucasg/Dependencies">安装</a>工具Dependens，通过这个工具，我们可以得到dll文件所需要的依赖项。如下：</p>
<p><img src="/2021/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E4%BD%8D%E5%A7%BF%E4%BC%B0%E8%AE%A1/%E9%A3%9E%E6%9C%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1(%E6%9D%A8%E4%B8%9A%E9%B9%8F-20220310203222)/飞机姿态估计(杨业鹏-20220310203222" alt="image-20220719185746611">/image-20220719185746611.png)</p>
<p>发现在其他电脑上没有上述依赖，以及很多cuda相关的依赖，于是直接将本机上CUDA\v11.1\bin目录下的所有dll文件复制到pyinstaller打包后生成的文件中torch的lib文件夹中。</p>
<p>再次运行可能还会报错说找不到torch的lib下的其他dll或依赖，这时直接删除掉报错的文件，可能再运行还报错，那么再删除，我删了2-3个之后可以正常运行了。</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。 </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2017-2023 Youngyep
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 562px;
    }
    .nav.fullscreen {
        margin-left: -562px;
    }
    .nav-left {
        width: 140px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 512px;
        }
        .nav.fullscreen {
            margin-left: -512px;
        }
        .nav-left {
            width: 120px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 512px;
            margin-left: -512px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
